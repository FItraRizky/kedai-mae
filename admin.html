<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Stok | Kedai Mae</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
      .admin-login, .admin-panel {max-width:400px;margin:60px auto;padding:32px;background:#fffbe9;border-radius:10px;box-shadow:0 4px 16px rgba(0,0,0,0.07);}
      .admin-panel {display:none;}
      .admin-panel h2 {margin-bottom:20px;}
      .stok-table {width:100%;margin-bottom:20px;}
      .stok-table th, .stok-table td {padding:8px 6px;text-align:left;}
      .stok-table th {color:var(--primary-color);}
      .stok-table input {width:60px;text-align:center;}
      .logout-btn {margin-top:10px;}
      .notif {color:green;margin-bottom:10px;}
      @media (max-width:600px){.admin-login,.admin-panel{padding:16px;}}
      .dark-mode .admin-login, .dark-mode .admin-panel {background:#232323;color:var(--text-color);}
      .dark-mode .stok-table th {color:var(--primary-color);}
      .dark-mode .stok-table input {background:#232323;color:var(--text-color);border:1px solid #444;}
    </style>
</head>
<body>
    <div class="admin-login">
        <h2>Login Admin Stok</h2>
        <input type="password" id="admin-pass" placeholder="Password admin">
        <button id="login-btn" class="btn" style="width:100%;margin-top:12px;">Login</button>
        <p id="login-error" style="color:red;display:none;margin-top:10px;">Password salah!</p>
    </div>
    <div class="admin-panel">
        <h2>Manajemen Stok Menu</h2>
        <div class="notif" id="stok-notif" style="display:none;">Stok berhasil disimpan!</div>
        <form id="stok-form">
            <table class="stok-table">
                <thead>
                    <tr><th>Menu</th><th>Stok</th></tr>
                </thead>
                <tbody id="stok-tbody">
                    <!-- Diisi JS -->
                </tbody>
            </table>
            <button type="submit" class="btn">Simpan Stok</button>
        </form>
        <button class="btn btn-outline logout-btn" id="logout-btn">Logout</button>
    </div>
    <script>
    // Data menu default (samakan id dengan data-id di index.html)
    const defaultStok = [
      {id:'nasi-goreng-special', name:'Nasi Goreng Special', stok:10},
      {id:'mie-ayam-jamur', name:'Mie Ayam Jamur', stok:10},
      {id:'sate-ayam-madura', name:'Sate Ayam Madura', stok:10},
      {id:'es-teh-manis', name:'Es Teh Manis', stok:10},
      {id:'jus-alpukat', name:'Jus Alpukat', stok:10},
      {id:'kentang-goreng', name:'Kentang Goreng', stok:10},
      {id:'roti-bakar-coklat', name:'Roti Bakar Coklat Keju', stok:10}
    ];
    function getStokList() {
      return JSON.parse(localStorage.getItem('kedaiMaeStok')||'null') || defaultStok;
    }
    function saveStokList(list) {
      localStorage.setItem('kedaiMaeStok', JSON.stringify(list));
    }
    // Login logic
    const loginBox = document.querySelector('.admin-login');
    const panelBox = document.querySelector('.admin-panel');
    const loginBtn = document.getElementById('login-btn');
    const passInput = document.getElementById('admin-pass');
    const loginError = document.getElementById('login-error');
    const logoutBtn = document.getElementById('logout-btn');
    loginBtn.onclick = function(){
      if(passInput.value==='admin123'){
        loginBox.style.display='none';panelBox.style.display='block';
        renderStokTable();
      }else{
        loginError.style.display='block';
      }
    };
    logoutBtn.onclick = function(){
      panelBox.style.display='none';loginBox.style.display='block';passInput.value='';
    };
    // Render table
    function renderStokTable(){
      const list = getStokList();
      const tbody = document.getElementById('stok-tbody');
      tbody.innerHTML = '';
      list.forEach(item=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${item.name}</td><td><input type='number' min='0' value='${item.stok}' data-id='${item.id}'></td>`;
        tbody.appendChild(tr);
      });
    }
    // Simpan stok
    document.getElementById('stok-form').onsubmit = function(e){
      e.preventDefault();
      const list = getStokList();
      document.querySelectorAll('#stok-tbody input').forEach(input=>{
        const item = list.find(i=>i.id===input.dataset.id);
        if(item) item.stok = parseInt(input.value)||0;
      });
      saveStokList(list);
      document.getElementById('stok-notif').style.display='block';
      setTimeout(()=>{document.getElementById('stok-notif').style.display='none';},2000);
    };
    </script>
</body>
</html>
